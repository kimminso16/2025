import streamlit as st
import matplotlib.pyplot as plt

# ==============================
# í˜ì´ì§€ ì„¤ì •
# ==============================
st.set_page_config(
    page_title="ğŸ§ª ìŠ¤ë§ˆíŠ¸ í•©ê¸ˆ ì„¤ê³„ ì‹œë®¬ë ˆì´í„° âš™ï¸",
    page_icon="âš™ï¸",
    layout="centered"
)

st.title("ğŸ§ª ìŠ¤ë§ˆíŠ¸ í•©ê¸ˆ ì„¤ê³„ ì‹œë®¬ë ˆì´í„° âš™ï¸")
st.write("ì›í•˜ëŠ” ì›ì†Œì™€ ë¹„ìœ¨ì„ ì„ íƒí•˜ë©´ í•©ê¸ˆ íŠ¹ì„±ì„ ì˜ˆì¸¡í•´ë“œë¦½ë‹ˆë‹¤! âœ¨")

# ==============================
# ì›ì†Œ íŠ¹ì§• ë°ì´í„°
# ==============================
elements = {
    "ì² (Fe)": {"ê°•ë„": 80, "ë‚´ì‹ì„±": 20, "ê°€ë²¼ì›€": 10, "ì„¤ëª…": "ğŸ—ï¸ ê°•ë„ê°€ ë†’ê³  ë‹¤ì–‘í•œ í•©ê¸ˆì˜ ê¸°ë³¸ ì¬ë£Œ"},
    "íƒ„ì†Œ(C)": {"ê°•ë„": 50, "ë‚´ì‹ì„±": 10, "ê°€ë²¼ì›€": 20, "ì„¤ëª…": "âš¡ ê²½í™” ë° ê°•ë„ ì¡°ì ˆì— í•„ìˆ˜, ì£¼ë¡œ ê°•ì² ì— ì‚¬ìš©"},
    "ì•Œë£¨ë¯¸ëŠ„(Al)": {"ê°•ë„": 40, "ë‚´ì‹ì„±": 50, "ê°€ë²¼ì›€": 90, "ì„¤ëª…": "âœˆï¸ ê°€ë³ê³  ë‚´ì‹ì„± ë›°ì–´ë‚¨, í•­ê³µê¸°Â·ìë™ì°¨ì— í™œìš©"},
    "êµ¬ë¦¬(Cu)": {"ê°•ë„": 30, "ë‚´ì‹ì„±": 60, "ê°€ë²¼ì›€": 40, "ì„¤ëª…": "ğŸ’¡ ì „ê¸°ì „ë„ì„±ì´ ì¢‹ê³  ë‚´ì‹ì„± ìˆìŒ"},
    "ë‹ˆì¼ˆ(Ni)": {"ê°•ë„": 50, "ë‚´ì‹ì„±": 80, "ê°€ë²¼ì›€": 30, "ì„¤ëª…": "ğŸ”¥ ë‚´ì—´ì„±Â·ë‚´ì‹ì„± ìš°ìˆ˜, ìŠ¤í…Œì¸ë¦¬ìŠ¤ê°•ì— ì‚¬ìš©"}
}

# ==============================
# ì›ì†Œ ì„ íƒ
# ==============================
st.subheader("ğŸ§¬ í•©ê¸ˆ ì›ì†Œ ì„ íƒ")
metal1 = st.selectbox("ì›ì†Œ 1 ğŸ”¹", list(elements.keys()))
ratio1 = st.slider("ë¹„ìœ¨ (%) ğŸ”¹", 0, 100, 50)

metal2 = st.selectbox("ì›ì†Œ 2 ğŸ”¸", list(elements.keys()))
ratio2 = st.slider("ë¹„ìœ¨ (%) ğŸ”¸", 0, 100, 50)

# ==============================
# íŠ¹ì§• í‘œì‹œ
# ==============================
st.subheader("ğŸ” ì„ íƒí•œ ì›ì†Œ íŠ¹ì§•")
st.write(f"{metal1}: {elements[metal1]['ì„¤ëª…']}")
st.write(f"{metal2}: {elements[metal2]['ì„¤ëª…']}")

# ==============================
# í•©ê¸ˆ ê³„ì‚°
# ==============================
if ratio1 + ratio2 != 100:
    st.warning("âš ï¸ ë¹„ìœ¨ í•©ê³„ê°€ 100%ê°€ ë˜ë„ë¡ ì¡°ì •í•´ì£¼ì„¸ìš”!")
else:
    st.success("âœ… ë¹„ìœ¨ í•©ê³„ 100%")

    # ê°•ë„, ë‚´ì‹ì„±, ê°€ë²¼ì›€ ê³„ì‚°
    strength = (elements[metal1]["ê°•ë„"] * ratio1 + elements[metal2]["ê°•ë„"] * ratio2) / 100
    corrosion = (elements[metal1]["ë‚´ì‹ì„±"] * ratio1 + elements[metal2]["ë‚´ì‹ì„±"] * ratio2) / 100
    weight = (elements[metal1]["ê°€ë²¼ì›€"] * ratio1 + elements[metal2]["ê°€ë²¼ì›€"] * ratio2) / 100

    # ==============================
    # ê²°ê³¼ í‘œì‹œ
    # ==============================
    st.subheader("ğŸ“Š í•©ê¸ˆ ì˜ˆì¸¡ íŠ¹ì„±")
    st.write(f"ğŸ”¹ í•©ê¸ˆ ì¡°í•©: {metal1} {ratio1}% + {metal2} {ratio2}%")
    st.write(f"ğŸ’ª ê°•ë„: {strength:.1f} / 100")
    st.write(f"ğŸ›¡ï¸ ë‚´ì‹ì„±: {corrosion:.1f} / 100")
    st.write(f"âš–ï¸ ê°€ë²¼ì›€: {weight:.1f} / 100")

    # ==============================
    # í•©ê¸ˆ ì¶”ì²œ ë©”ì‹œì§€
    # ==============================
    st.subheader("ğŸ’¡ í•©ê¸ˆ ì¶”ì²œ ë©”ì‹œì§€")
    if strength > 70 and corrosion > 50:
        st.success("ğŸ”¥ ê°•ë ¥í•˜ê³  ë‚´ì‹ì„± ì¢‹ì€ í•©ê¸ˆ! ìŠ¤í…Œì¸ë¦¬ìŠ¤ê°• ëŠë‚Œ")
    elif weight > 70 and corrosion > 40:
        st.success("âœˆï¸ ê°€ë³ê³  ë‚´ì‹ì„± ì¢‹ì€ í•©ê¸ˆ! í•­ê³µê¸°ìš© ì•Œë£¨ë¯¸ëŠ„ í•©ê¸ˆ")
    elif strength > 60:
        st.success("ğŸ—ï¸ ê°•ë„ê°€ ë†’ì•„ êµ¬ì¡°ìš© í•©ê¸ˆì— ì í•©")
    else:
        st.info("ğŸ§© íŠ¹ì„±ì´ ë³µí•©ì ì´ë¯€ë¡œ ì‹¤í—˜ ë° ì¶”ê°€ ì—°êµ¬ í•„ìš”")

    # ==============================
    # ê·¸ë˜í”„ ì‹œê°í™”
    # ==============================
    fig, ax = plt.subplots()
    properties = [strength, corrosion, weight]
    labels = ["ğŸ’ª ê°•ë„", "ğŸ›¡ï¸ ë‚´ì‹ì„±", "âš–ï¸ ê°€ë²¼ì›€"]
    colors = ["#ff6b6b", "#22c55e", "#ffd166"]
    ax.bar(labels, properties, color=colors)
    ax.set_ylim(0, 100)
    ax.set_ylabel("ìˆ˜ì¹˜ (0~100)")
    st.pyplot(fig)

st.markdown("---")
st.write("ğŸ”§ íŒ: ì›ì†Œì™€ ë¹„ìœ¨ì„ ë°”ê¾¸ì–´ ë‹¤ì–‘í•œ í•©ê¸ˆì„ ì‹¤í—˜í•´ë³´ì„¸ìš”! ğŸ§ª")
    
